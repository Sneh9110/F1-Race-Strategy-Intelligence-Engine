# Race Simulation Engine Configuration

# Performance settings
performance:
  max_latency_ms: 500
  enable_cache: true
  cache_ttl_seconds: 300
  circuit_breaker_threshold: 5
  circuit_breaker_timeout: 60

# Safety car configuration
safety_car:
  duration_laps: 3
  lap_time_multiplier: 1.3
  pit_loss_multiplier: 0.5
  base_probability: 0.15

# Virtual safety car configuration
virtual_safety_car:
  duration_laps: 2
  lap_time_multiplier: 1.15
  base_probability: 0.10

# Traffic effects
traffic:
  dirty_air_threshold_seconds: 1.0
  dirty_air_penalty_seconds: 0.3
  drs_gain_seconds: 0.4

# Monte Carlo settings
monte_carlo:
  default_runs: 1000
  max_runs: 10000
  num_workers: 8
  convergence_threshold: 0.01
  convergence_window: 100
  
  # Noise injection
  noise:
    tire_degradation_std: 0.02
    lap_time_std: 0.15
    pit_stop_std: 0.5
    safety_car_probability_boost: 0.05

# Strategy tree exploration
strategy_tree:
  max_workers: 4
  max_strategies: 50
  pruning_threshold_seconds: 5.0
  max_pit_stops: 3
  
  # Pit window constraints
  pit_window:
    min_lap: 6
    max_lap_offset_from_end: 5
    min_stint_length: 10
    max_stint_length: 40

# Strategy templates
strategy_templates:
  one_stop:
    - pit_laps: [25]
      tire_sequence: ["SOFT", "MEDIUM"]
    - pit_laps: [30]
      tire_sequence: ["MEDIUM", "HARD"]
    - pit_laps: [35]
      tire_sequence: ["SOFT", "HARD"]
  
  two_stop:
    - pit_laps: [20, 40]
      tire_sequence: ["SOFT", "MEDIUM", "HARD"]
    - pit_laps: [18, 38]
      tire_sequence: ["SOFT", "SOFT", "MEDIUM"]
    - pit_laps: [25, 45]
      tire_sequence: ["MEDIUM", "MEDIUM", "HARD"]
  
  three_stop:
    - pit_laps: [15, 30, 45]
      tire_sequence: ["SOFT", "SOFT", "MEDIUM", "HARD"]
    - pit_laps: [14, 28, 42]
      tire_sequence: ["SOFT", "SOFT", "SOFT", "MEDIUM"]

# Tire compound characteristics
tire_compounds:
  SOFT:
    base_pace_gain: 0.0
    degradation_rate: 0.05
    optimal_stint_length: 15
    
  MEDIUM:
    base_pace_gain: 0.3
    degradation_rate: 0.03
    optimal_stint_length: 25
    
  HARD:
    base_pace_gain: 0.6
    degradation_rate: 0.02
    optimal_stint_length: 35
    
  INTERMEDIATE:
    base_pace_gain: 2.0
    degradation_rate: 0.04
    optimal_stint_length: 20
    
  WET:
    base_pace_gain: 5.0
    degradation_rate: 0.03
    optimal_stint_length: 25

# Fuel effects
fuel:
  consumption_per_lap_kg: 1.5
  lap_time_effect_per_kg_seconds: 0.03
  starting_fuel_kg: 110.0

# What-if scenario defaults
what_if:
  safety_car_duration: 3
  rain_intensity_multipliers:
    light: 1.1
    moderate: 1.3
    heavy: 1.8
  
  pace_adjustments:
    aggressive: -0.2
    balanced: 0.0
    conservative: 0.3

# Logging
logging:
  level: "INFO"
  enable_performance_tracking: true
  log_race_events: true
  log_state_changes: false
